{% extends "base.html" %} {% load static %}
{% block content %}
<div class="section bg-light">
 <div class="col-12 pt-3">
  <h4 class="text-center">Confirm Purchase</h4>
  <div class="block-divider"></div>
 </div>
 <div class="container">
  <div class="row">
   <div class="col-12">
    {% if cart_items %}
    <div class="table-responsive rounded">
     <table class="table table-sm table-borderless">
      <thead class="text-black">
       <tr>
        <th scope="col">Course Name</th>
        <th scope="col">Price</th>
       </tr>
      </thead>

      {% for item in cart_items %}
      <tr>
       <td class="py-3">
        <p class="my-0"><strong>{{ item.course.name }}</strong></p>
       </td>
       <td class="py-3">
        <p class="my-0">£{{ item.course.price }}</p>
       </td>
      </tr>
      <tr>
       <td colspan="3" class="text-center">
        <h6><strong><a href="{% url 'remove_item' item.id %}" class="btn btn-danager">Remove</a></strong></h6>
       </td>
      </tr>
      {% endfor %}
      <tr>
       <td colspan="4" class="pt-5 text-center">
        <h5><strong>Total: £{{ total|floatformat:2 }}</strong></h5>
       </td>
      </tr>
      <tr class="text-center">
       <td colspan="5" class="text-right">
        <a href="{% url 'display_courses' %}" class="btn">
         <span>Back</span>
        </a>
        <a href="{% url 'checkout' %}" class="btn">
         <span>Secure Checkout</span>
         <span class="icon">
          <i class="fas fa-lock"></i>
         </span>
        </a>
       </td>
      </tr>
     </table>
    </div>
    {% else %}
    <div class="col text-center mb-3">
     <p>Your cart is empty.</p>
     <a href="{% url 'display_courses' %}" class="btn">View Courses</a>
    </div>
    {% endif %}
   </div>
  </div>
 </div>
</div>
{% endblock %}